<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Макари - D&B Fishing</title>
  <link rel="stylesheet" href="css/css.css">
</head>
<body>
  <header class="site-header">
    <!-- ...existing code for header/navbar... -->
  </header>
  <main class="shop-page">
    <h1 style="text-align:center;margin:32px 0 24px;">Макари</h1>
    <section class="featured-products">
      <div class="product-slider">
        <div class="product-card" data-product-id="reel-101" data-images="images/makara1.jpg,images/makara1-2.jpg,images/makara1-3.jpg,images/makara1-4.jpg" data-title="Фидер макара Trabucco SPECTRUM XR" data-price="137,00 лв." data-desc="Фидер макара с преден аванс, плавен ход и висока издръжливост." data-brand="Trabucco" data-category="Макари" data-href="/product/trabucco-spectrum-xr.html" data-sku="TRAB-SPEC-XR">
          <img src="images/makara1.jpg" alt="Trabucco Spectrum XR">
          <h4>Фидер макара Trabucco SPECTRUM XR</h4>
          <p class="price">от 137,00 лв. / 70,05 €</p>
          <a href="#" class="btn-details" data-quick="true">Виж детайли</a>
          <button class="btn-add-cart" type="button">Добави в количката</button>
        </div>
        <div class="product-card" data-product-id="reel-102" data-images="images/makara2.jpg,images/makara2-2.jpg,images/makara2-3.jpg" data-title="Фидер макара Trabucco INSPIRON FDR" data-price="152,00 лв." data-desc="Висок клас макара за фидер риболов, с плавен ход и здравина." data-brand="Trabucco" data-category="Макари" data-href="/product/trabucco-inspiron-fdr.html" data-sku="TRAB-INSP-FDR">
          <img src="images/makara2.jpg" alt="Trabucco Inspiron FDR">
          <h4>Фидер макара Trabucco INSPIRON FDR</h4>
          <p class="price">от 152,00 лв. / 77,72 €</p>
          <a href="#" class="btn-details" data-quick="true">Виж детайли</a>
          <button class="btn-add-cart" type="button">Добави в количката</button>
        </div>
        <div class="product-card" data-product-id="reel-103" data-images="images/makara3.jpg,images/makara3-2.jpg" data-title="Фидер макара Preston Intensity 620 Feeder" data-price="362,00 лв." data-desc="Професионална макара за интензивен риболов, с изключителна издръжливост." data-brand="Preston" data-category="Макари" data-href="/product/preston-intensity-620.html" data-sku="PREST-INT-620">
          <img src="images/makara3.jpg" alt="Preston Intensity 620 Feeder">
          <h4>Фидер макара Preston Intensity 620 Feeder</h4>
          <p class="price">362,00 лв. / 185,09 €</p>
          <a href="#" class="btn-details" data-quick="true">Виж детайли</a>
          <button class="btn-add-cart" type="button">Добави в количката</button>
        </div>
      </div>
      <button class="product-slider-btn prev">&#10094;</button>
      <button class="product-slider-btn next">&#10095;</button>
    </section>
  </main>
  <footer>
    © 2025 D&B Fishing. Всички права запазени.
  </footer>
  <script src="js/cart.js"></script>
  <script src="js/quickview.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Add to cart button handler (compatible with cart.js)
      document.querySelectorAll('.product-card .btn-add-cart').forEach(function(btn) {
        btn.addEventListener('click', function(e) {
          const card = btn.closest('.product-card');
          if (!card) return;
          const item = {
            name: card.getAttribute('data-title'),
            price: card.getAttribute('data-price'),
            desc: card.getAttribute('data-desc'),
            brand: card.getAttribute('data-brand'),
            category: card.getAttribute('data-category'),
            sku: card.getAttribute('data-sku'),
            images: card.getAttribute('data-images'),
            qty: 1
          };
          if (typeof window.addToCart === 'function') {
            window.addToCart(item);
          } else if (typeof window.addToCart === 'undefined' && typeof window.dispatchEvent === 'function') {
            // fallback: dispatch event for cart.js
            window.dispatchEvent(new CustomEvent('add-to-cart', { detail: item }));
          }
        });
      });

      // Quickview handler for 'Виж детайли' (compatible with quickview.js)
      document.querySelectorAll('.product-card .btn-details').forEach(function(btn) {
        btn.addEventListener('click', function(e) {
          e.preventDefault();
          if (typeof window.showQuickView === 'function') {
            window.showQuickView(btn.closest('.product-card'));
          } else {
            // fallback: trigger click for quickview.js
            btn.setAttribute('data-quick', 'true');
            btn.click();
          }
        });
      });
    });
  </script>
</body>
</html>
